# Field Tool Manager 利用マニュアル

## 目次

### 第1部: クイックスタートガイド
1. [システムへのアクセス](#1-システムへのアクセス)
2. [初回ログイン](#2-初回ログイン)
3. [基本的な使い方](#3-基本的な使い方)

### 第2部: 現場スタッフ向けマニュアル
4. [日常業務の操作](#4-日常業務の操作)
5. [QRコードスキャン操作](#5-qrコードスキャン操作)
6. [道具の持ち出し・返却](#6-道具の持ち出し返却)
7. [道具セットの利用](#7-道具セットの利用)
8. [トラブルシューティング](#8-トラブルシューティング現場スタッフ)

### 第3部: 管理者向けマニュアル
9. [管理者機能の概要](#9-管理者機能の概要)
10. [道具の管理](#10-道具の管理)
11. [道具セットの管理](#11-道具セットの管理)
12. [倉庫位置管理](#12-倉庫位置管理)
13. [ユーザー管理](#13-ユーザー管理)
14. [レポート機能](#14-レポート機能)
15. [システム設定](#15-システム設定)

### 第4部: システム管理者向けマニュアル
16. [組織の初期設定](#16-組織の初期設定)
17. [機能フラグの管理](#17-機能フラグの管理)
18. [データの移行と保守](#18-データの移行と保守)

---

## 第1部: クイックスタートガイド

## 1. システムへのアクセス

### 1.1 アクセスURL
貴社専用のURLからアクセスします：
```
https://[会社名].tool-manager.com
```
例：`https://a-kensetsu.tool-manager.com`

### 1.2 対応環境

#### 推奨ブラウザ
- **PC**: Chrome 90以上、Edge 90以上、Safari 14以上、Firefox 88以上
- **スマートフォン**: Chrome（Android）、Safari（iOS）

#### 推奨デバイス
- **iOS**: iPhone 8以降（iOS 14以上）
- **Android**: Android 8.0以上

### 1.3 ネットワーク要件
- インターネット接続必須
- QRコードスキャン時はカメラ権限が必要

---

## 2. 初回ログイン

### 2.1 ログイン手順

1. **URLアクセス**
   ```
   1. ブラウザを開く
   2. 会社専用URLを入力
   3. ログイン画面が表示される
   ```

2. **認証情報入力**
   ```
   メールアドレス: [管理者から通知されたメールアドレス]
   パスワード: [初期パスワード]

   ※初期パスワードは初回ログイン後に変更してください
   ```

3. **ログインボタンをクリック**

### 2.2 パスワード変更

初回ログイン時は必ずパスワードを変更してください：

1. ログイン後、「パスワード変更が必要です」と表示される
2. 新しいパスワードを入力（8文字以上、英数字混在）
3. 確認のため同じパスワードを再入力
4. 「変更」ボタンをクリック

### 2.3 プロフィール設定

1. 右上のユーザーアイコンをクリック
2. 「プロフィール設定」を選択
3. 以下の情報を設定：
   - 氏名
   - 部署
   - 電話番号
   - 通知設定

---

## 3. 基本的な使い方

### 3.1 ホーム画面の構成

```
┌─────────────────────────────────────────────────┐
│ [≡] Field Tool Manager        [🔍] [🔔] [👤]  │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐      │
│  │          │ │          │ │          │      │
│  │ QRスキャン│ │ 道具一覧 │ │ 在庫確認 │      │
│  │    📷    │ │    📋    │ │    📊    │      │
│  └──────────┘ └──────────┘ └──────────┘      │
│                                                 │
│  最近の活動                                     │
│  ├─ 10:30 ドリル T-001を持ち出し              │
│  ├─ 09:15 ドライバー T-002を返却              │
│  └─ 08:45 サンダー T-003を持ち出し            │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 3.2 メニュー構成

#### サイドメニュー（≡）
- **ダッシュボード**: ホーム画面
- **QRスキャン**: 道具のQRコード読み取り
- **道具管理**: 道具の検索・詳細確認
- **在庫照会**: 在庫状況の確認
- **履歴**: 移動履歴の確認
- **レポート**: 各種レポート（権限による）
- **設定**: アプリ設定

#### ヘッダーアイコン
- 🔍 **検索**: 道具の検索
- 🔔 **通知**: お知らせ・アラート
- 👤 **プロフィール**: ユーザー設定

---

## 第2部: 現場スタッフ向けマニュアル

## 4. 日常業務の操作

### 4.1 一日の業務フロー

#### 朝の作業開始時
1. システムにログイン
2. 本日使用する道具をQRコードで持ち出し登録
3. 現場へ移動

#### 作業中
- 追加で道具が必要な場合は、都度QRコードで持ち出し登録
- 他の現場へ道具を移動する場合は、移動登録

#### 作業終了時
1. 使用した道具をQRコードで返却登録
2. 道具の状態を確認・登録
3. 倉庫に返却

### 4.2 よく使う機能

#### クイックアクション
ホーム画面から直接アクセスできる機能：

1. **QRスキャン** - 最も使用頻度が高い
2. **道具検索** - QRコードがない場合
3. **履歴確認** - 自分の操作履歴を確認

---

## 5. QRコードスキャン操作

### 5.1 スキャン画面の起動

1. ホーム画面の「QRスキャン」をタップ
2. カメラ権限を許可（初回のみ）
3. カメラが起動

### 5.2 QRコードの読み取り

#### 成功する読み取り方法
```
✅ 良い例：
- QRコード全体が枠内に収まっている
- 明るい場所で撮影
- カメラとQRコードが平行
- 15-30cm程度の距離

❌ 悪い例：
- QRコードの一部が切れている
- 暗い場所や逆光
- 斜めから撮影
- 近すぎる/遠すぎる
```

### 5.3 スキャン後のアクション

QRコードを読み取ると、自動的にアクション選択画面が表示されます：

```
┌─────────────────────────────────────────────────┐
│ ドリル (T-001)                                 │
│ 現在地: 本社倉庫                               │
├─────────────────────────────────────────────────┤
│                                                 │
│  [持ち出し]  [返却]  [移動]  [詳細]           │
│                                                 │
└─────────────────────────────────────────────────┘
```

### 5.4 手動入力（QRコードが読めない場合）

1. スキャン画面下部の「手動入力」をタップ
2. 道具コードを入力（例：T-001）
3. 「検索」をタップ
4. 道具が表示されたら、アクションを選択

---

## 6. 道具の持ち出し・返却

### 6.1 持ち出し操作

#### 手順
1. QRコードをスキャン
2. 「持ち出し」をタップ
3. 持ち出し先を選択：
   ```
   行き先を選択してください：
   □ A現場
   □ B現場
   □ C現場
   □ その他（入力）
   ```
4. 「確認」をタップ
5. 完了メッセージが表示される

#### 複数道具の一括移動 ✨NEW

倉庫から現場への持ち出し、現場から倉庫への返却、現場間の移動を複数道具まとめて行えます。

##### 手順
1. ダッシュボードから「📦 一括移動」をタップ
2. **移動先を選択**
   - 🏢 倉庫
   - 🏗️ 現場（現場名を選択）
   - 🔧 修理
3. **道具を選択**
   - 検索欄で道具を検索
   - 検索結果から道具をタップして追加
   - QRコードをスキャンして追加（推奨）
4. 選択した道具のリストを確認
   - 不要な道具は「削除」ボタンで除外可能
5. 「○件を一括登録」ボタンをタップ
6. 完了メッセージが表示される

##### 対応パターン
- **倉庫 → 現場**：複数道具をまとめて持ち出し
- **現場 → 倉庫**：複数道具をまとめて返却
- **現場 → 現場**：複数道具を別の現場へ移動

##### 便利な使い方
- 倉庫から道具を連続でスキャンして、一度に現場へ持ち出し
- 現場から返却する道具を連続でスキャンして、一度に倉庫へ返却
- 移動先を変更したい場合は、一度選択をクリアして最初からやり直し

### 6.2 返却操作

#### 手順
1. QRコードをスキャン
2. 「返却」をタップ
3. 返却先を確認（通常は自動設定）
4. 道具の状態を選択：
   ```
   道具の状態：
   ◉ 正常
   ○ 要メンテナンス
   ○ 故障
   ○ その他
   ```
5. 必要に応じてコメント入力
6. 「返却」をタップ

### 6.3 移動操作（現場間の移動）

1. QRコードをスキャン
2. 「移動」をタップ
3. 移動元と移動先を選択
4. 「確認」をタップ

### 6.4 操作の取り消し

誤って登録した場合（5分以内）：
1. 「履歴」画面を開く
2. 該当の操作を見つける
3. 「取り消し」をタップ
4. 理由を入力
5. 「確認」をタップ

---

## 7. 道具セットの利用

### 7.1 道具セットとは

よく一緒に使う道具をまとめて「セット」として登録し、一括で移動できる機能です。

**利用シーン例：**
- 基本工具セット（ドライバー、ペンチ、メジャーなど）
- 電動工具セット（インパクトドライバー、サンダー、充電器など）
- 外壁塗装セット（ローラー、刷毛、養生テープなど）

### 7.2 セットの一覧を見る

1. ダッシュボードから「📋 道具セット」をタップ
2. 登録されているセット一覧が表示されます
   - セット名
   - 説明
   - 含まれるアイテム数
3. 各セットには以下のボタンがあります：
   - **詳細**: セットの内容を確認
   - **📦 セット移動**: セット内の全道具を一括移動

### 7.3 セット内容の確認

1. セット一覧から「詳細」をタップ
2. セット詳細画面で以下を確認できます：
   - **セット情報**: セット名、説明、作成者、作成日
   - **含まれる道具**: 道具マスタごとにグループ化表示
   - **各アイテムの状態**: シリアル番号、状態、現在地
3. 各アイテムには個別の「詳細」「📦 移動」ボタンもあります

### 7.4 セット一括移動（現場への持ち出し）

#### 手順
1. 道具セット一覧またはセット詳細から「📦 セットごと移動」をタップ
2. 移動画面が開きます
   - セット内の全アイテムが表示されます
   - 各アイテムの現在地が確認できます
3. **移動先を選択**
   - 🏗️ 現場に移動：持ち出し先の現場を選択
   - 🏢 倉庫に戻す：全て倉庫に返却
4. メモ（任意）を入力
5. 「セット一括移動 (○個)」ボタンをタップ
6. 確認画面で内容を確認して「確定」

#### 一括移動の仕組み
- セット内の全アイテムが同じ移動先に移動されます
- 各アイテムの移動種別は自動判定されます：
  - 倉庫→現場：「持ち出し」
  - 現場→倉庫：「返却」
  - 現場→現場：「移動」
- 履歴には「[セット移動]」タグが自動付与されます
- 一部のアイテムが移動できなくても、他のアイテムは移動されます

### 7.5 セット一括移動（現場からの返却）

#### 手順
1. セット詳細または一覧から「📦 セットごと移動」をタップ
2. 移動先で「🏢 倉庫に戻す」を選択
3. メモ（例：「A現場作業完了」）を入力
4. 「セット一括移動」をタップ
5. 全アイテムが倉庫に返却されます

### 7.6 セットの作成（リーダー・管理者のみ）

1. 道具セット一覧から「+ 新規作成」をタップ
2. **セット名**を入力（必須）
   - 例：「基本工具セット」「電動工具一式」
3. **説明**を入力（任意）
   - 例：「よく使う基本的な工具の組み合わせ」
4. **道具を選択**
   - 検索ボックスで道具名、型番、シリアル番号で検索
   - チェックボックスで個別アイテムを選択
   - 道具マスタごとにグループ化されて表示されます
   - 各アイテムの状態と現在地が確認できます
5. 「セットを作成 (○個)」ボタンをタップ
6. セットが作成され、セット一覧に追加されます

#### 注意点
- セット名は組織内で重複できません
- 最低1つ以上のアイテムを選択する必要があります
- 同じアイテムを複数回選択することはできません

### 7.7 セットの削除（管理者のみ）

1. セット詳細画面を開く
2. 「🗑️ セットを削除」ボタンをタップ
3. 確認画面で「削除」を選択
4. セットが削除されます（アイテム自体は削除されません）

### 7.8 よくある質問

**Q: セットに含まれるアイテムを変更できますか？**
A: 現在、セット作成後のアイテム変更はできません。新しいセットを作成してください。

**Q: セット移動中に一部のアイテムがエラーになりました**
A: 移動できたアイテム数とエラーになったアイテムが表示されます。エラーになったアイテムは個別に対応してください。

**Q: セット内のアイテムが現在バラバラの場所にあります**
A: セット一括移動は、現在地に関わらず実行できます。各アイテムが現在地から指定した移動先に移動します。

**Q: セットを削除するとアイテムも削除されますか？**
A: いいえ、セットの情報のみが削除され、個別アイテムは削除されません。

---

## 8. トラブルシューティング（現場スタッフ）

### 8.1 QRコードが読み取れない

#### 原因と対処法

| 症状 | 原因 | 対処法 |
|------|------|--------|
| カメラが起動しない | カメラ権限がない | 設定→アプリ→カメラ権限をON |
| ピントが合わない | カメラレンズが汚れている | レンズを清拭 |
| 読み取りエラー | QRコードが汚損 | 手動入力で対応 |
| 暗くて読めない | 照明不足 | ライトをONにする |

### 7.2 ログインできない

1. **パスワードを忘れた場合**
   - ログイン画面の「パスワードを忘れた方」をタップ
   - メールアドレスを入力
   - リセットメールの指示に従う

2. **アカウントがロックされた場合**
   - 管理者に連絡
   - 5回連続でログイン失敗するとロック

### 7.3 操作ミスをした場合

#### 間違えて持ち出し登録した
→ 履歴から5分以内なら取り消し可能

#### 返却先を間違えた
→ 管理者に連絡して修正依頼

#### 道具の状態を間違えて登録
→ 道具詳細画面から状態を更新

### 7.4 エラーメッセージ対応

| エラーメッセージ | 意味 | 対処法 |
|------------------|------|--------|
| 「道具が見つかりません」 | QRコードが無効 | 道具コードを確認 |
| 「権限がありません」 | 操作権限なし | 管理者に確認 |
| 「ネットワークエラー」 | 通信障害 | 電波状況を確認 |
| 「在庫が不足しています」 | 数量管理品の在庫なし | 管理者に連絡 |

---

## 第3部: 管理者向けマニュアル

## 8. 管理者機能の概要

### 8.1 管理者の役割

管理者は以下の権限を持ちます：
- 道具の登録・編集・削除
- QRコード発行
- ユーザーの追加・編集
- レポート生成・閲覧
- システム設定の変更

### 8.2 管理画面へのアクセス

1. 通常のURLでログイン
2. 管理者権限でログインすると追加メニューが表示
3. サイドメニューから「管理機能」を選択

### 8.3 ダッシュボード

管理者ダッシュボードでは以下を確認できます：

```
┌─────────────────────────────────────────────────┐
│ 管理者ダッシュボード                           │
├─────────────────────────────────────────────────┤
│                                                 │
│ ■ 本日のサマリー                               │
│ 持ち出し: 45件  返却: 38件  移動: 12件        │
│                                                 │
│ ■ アラート                                     │
│ ⚠ 低在庫: ドライバー（残り2個）               │
│ ⚠ 未返却: ドリル T-003（3日経過）             │
│                                                 │
│ ■ クイックアクション                           │
│ [道具追加] [ユーザー追加] [レポート生成]       │
│                                                 │
└─────────────────────────────────────────────────┘
```

---

## 9. 道具の管理

### 9.1 道具の新規登録

#### 個別登録
1. 「道具管理」→「新規追加」をクリック
2. 必須項目を入力：
   ```
   道具コード*: T-100
   道具名*: 電動ドリル
   カテゴリ*: [▼電動工具を選択]
   管理タイプ*: (●)個品管理 ( )数量管理
   ```
3. 詳細情報を入力（任意）：
   ```
   メーカー: マキタ
   型番: DF457D
   購入日: 2024/01/15
   購入価格: 25,000円
   ```
4. 「保存」をクリック
5. 自動的にQRコードが生成される

#### 一括登録（Excelインポート）
1. 「道具管理」→「一括登録」をクリック
2. 「テンプレートをダウンロード」をクリック
3. Excelファイルに道具情報を入力
4. ファイルをアップロード
5. プレビューを確認
6. 「インポート実行」をクリック

### 9.2 QRコードの管理

#### QRコード印刷
1. 道具詳細画面を開く
2. 「QRコード」タブを選択
3. 印刷オプションを選択：
   ```
   サイズ: [▼ 3cm × 3cm]
   ラベル: ☑ 道具名を表示
          ☑ 道具コードを表示
   枚数: [1] 枚
   ```
4. 「印刷」をクリック

#### 一括QRコード生成
1. 道具一覧で対象を選択
2. 「一括操作」→「QRコード印刷」
3. 印刷設定を選択
4. PDFが生成される

### 9.3 道具の編集・削除

#### 編集
1. 道具一覧から対象を選択
2. 「編集」をクリック
3. 情報を更新
4. 「保存」をクリック

#### 削除（論理削除）
1. 道具一覧から対象を選択
2. 「削除」をクリック
3. 確認ダイアログで「OK」
4. データは保持され、「削除済み」ステータスになる

### 9.4 在庫管理

#### 在庫調整
1. 「在庫照会」を開く
2. 調整が必要な道具を選択
3. 「在庫調整」をクリック
4. 調整内容を入力：
   ```
   現在の在庫: 10
   実在庫: 8
   差異: -2
   理由: 紛失
   ```
5. 「調整実行」をクリック

#### 棚卸作業
1. 「棚卸」メニューを開く
2. 「新規棚卸」をクリック
3. 対象範囲を選択
4. 実地棚卸を実施
5. 差異を記録
6. 「棚卸完了」をクリック

---

## 12. 倉庫位置管理

### 12.1 倉庫位置管理とは

倉庫内のどこに何があるかを詳細に管理する機能です。各企業の倉庫レイアウトに合わせて、柔軟な位置管理が可能です。

**主な特徴：**
- 1～5階層のカスタマイズ可能な位置管理
- 棚、壁掛け、床置き、コンテナなど多様な保管方法に対応
- QRコードによる位置の即座な識別
- 道具がどこにあるか一目で把握

**利用シーン例：**
- 整理された倉庫: エリア → 棚 → 段（例: A-1-上）
- シンプルな倉庫: 場所のみ（例: 北側）
- 複雑な倉庫: フロア → エリア → 保管方法 → 番号（例: 1F-工具-壁掛け-3）

---

### 12.2 初期設定（必須）

倉庫位置を登録する前に、組織の倉庫階層構造を設定する必要があります。

#### Step 1: 組織設定画面にアクセス
1. ダッシュボードから「⚙️ 組織設定」をクリック
2. 「倉庫階層設定」セクションまでスクロール

#### Step 2: 階層レベルの設定
貴社の倉庫に合わせて、1～5階層を設定します。

**パターン例1: 整理された倉庫（3階層）**
```
レベル1: エリア
レベル2: 棚
レベル3: 段
```
→ 位置コード例: `A-1-上`（Aエリア、1番棚、上段）

**パターン例2: シンプルな倉庫（1階層）**
```
レベル1: 場所
```
→ 位置コード例: `北側`、`入口付近`

**パターン例3: 複雑な倉庫（4階層）**
```
レベル1: フロア
レベル2: エリア
レベル3: 保管方法
レベル4: 番号
```
→ 位置コード例: `1F-工具-壁掛け-3`

#### Step 3: 各レベルのラベル入力
1. レベルごとにラベル名を入力します
2. 「有効」チェックボックスをONにします
3. 「保存」をクリック

**注意事項：**
- 一度設定した階層構造は、後から変更すると既存位置データに影響します
- まずは社内で倉庫のレイアウトを確認し、適切な階層構造を決定してください
- 不要なレベルは「有効」をOFFにすることで無効化できます

---

### 12.3 倉庫位置の登録

#### Step 1: 位置一覧画面を開く
1. ダッシュボードから「📍 倉庫位置管理」をクリック
2. 「+ 新規登録」ボタンをクリック

#### Step 2: 階層情報の入力
設定した階層ごとに値を入力します。

**例: 3階層設定（エリア-棚-段）の場合**
```
エリア: A
棚: 1
段: 上
```
→ 位置コード: `A-1-上`（自動生成）

**例: 4階層設定（フロア-エリア-保管方法-番号）の場合**
```
フロア: 1F
エリア: 工具
保管方法: 壁掛け
番号: 3
```
→ 位置コード: `1F-工具-壁掛け-3`（自動生成）

#### Step 3: 表示名の入力（必須）
位置コードとは別に、分かりやすい表示名を入力します。

**入力例：**
```
位置コード: A-1-上
表示名: Aエリア 1番棚 上段
```

**ポイント：**
- 現場スタッフが理解しやすい名前にする
- 「入口から2番目」など、物理的な目印を含めると分かりやすい

#### Step 4: 説明の入力（任意）
補足情報や特記事項を入力できます。

**入力例：**
```
説明: 入口から左手2番目の棚。重量物用の道具を配置。
```

#### Step 5: QRコード生成（推奨）
- 「QRコードを生成する」にチェック（デフォルトON）
- QRコードは位置を即座に識別するために使用します

#### Step 6: 登録完了
「登録」ボタンをクリックして完了です。

---

### 12.4 倉庫位置一覧の確認

#### 位置一覧画面
倉庫位置一覧では以下の情報が確認できます：

| 項目 | 説明 |
|------|------|
| 位置コード | A-1-上、1F-工具-壁掛け-3 など |
| 表示名 | Aエリア 1番棚 上段 など |
| 説明 | 補足情報 |
| 道具数 | その位置にある道具の個数 |
| QR | QRコード生成済みかどうか |
| 操作 | 詳細・QR印刷ボタン |

#### フィルタリング・検索
- 位置コードや表示名での検索
- 道具数でのソート
- QRコード有無でのフィルタ

---

### 12.5 QRコードの印刷と貼り付け

倉庫位置にQRコードを貼り付けると、スタッフがスマートフォンでスキャンして即座に位置を識別できます。

#### QRコード印刷手順
1. 位置一覧から対象位置の「QR印刷」をクリック
2. QRコード印刷ページが開く
3. ブラウザの印刷機能で印刷
4. ラベルシールに印刷するか、A4用紙に印刷して切り取る

#### QRコードの貼り付け場所
**推奨位置：**
- 棚の前面、目線の高さ
- 保護シートをかぶせて汚損防止
- 明るい場所（読み取りやすさ重視）

**避けるべき場所：**
- 直射日光が当たる場所（劣化が早い）
- 水や油がかかる場所
- 隠れてしまう場所

---

### 12.6 道具への位置割り当て

倉庫に道具を返却する際、詳細な位置を指定できます。

#### 返却時の位置選択
1. 道具を倉庫に返却
2. 移動画面で「倉庫位置を選択」ドロップダウンが表示される
3. 位置を選択（例: A-1-上）
4. 「返却」をクリック

#### 位置の変更
倉庫内で道具を移動した場合：
1. 道具詳細画面を開く
2. 「倉庫位置を変更」をクリック
3. 新しい位置を選択
4. 「保存」をクリック

---

### 12.7 位置から道具を探す

#### 方法1: 位置一覧から確認
1. 「📍 倉庫位置管理」を開く
2. 位置一覧の「道具数」列を確認
3. 該当位置の「詳細」をクリック
4. その位置にある道具一覧が表示される

#### 方法2: QRコードスキャン
1. 倉庫位置に貼られたQRコードをスキャン
2. その位置にある道具一覧が表示される
3. 探している道具を確認

#### 方法3: 道具検索から逆引き
1. 「🔍 道具検索」で道具を検索
2. 道具詳細画面で「倉庫位置」を確認
3. 「A-1-上」などの位置情報が表示される

---

### 12.8 位置の編集・削除

#### 位置情報の編集
1. 位置一覧から「詳細」をクリック
2. 「編集」ボタンをクリック
3. 表示名や説明を修正
4. 「保存」をクリック

**注意：**
- 位置コード（階層値）は編集できません
- 変更が必要な場合は新規作成してください

#### 位置の削除
1. 位置詳細画面を開く
2. 「削除」ボタンをクリック
3. 確認画面で「削除」を選択

**削除の条件：**
- その位置に道具が割り当てられていないこと
- 道具がある場合は、先に別の位置に移動してください

---

### 12.9 運用のベストプラクティス

#### 初期導入時
1. **まずは大まかな階層から**: 最初から細かく分けすぎない
2. **パイロット運用**: 一部のエリアで試してから全体展開
3. **スタッフへの説明会**: QRコードの使い方を周知

#### 日常運用
1. **返却時は必ず位置を登録**: 位置不明を防ぐ
2. **定期的な棚卸**: 位置と実態の一致確認
3. **QRコードの劣化チェック**: 読み取れない場合は再印刷

#### レイアウト変更時
1. **計画的な変更**: 繁忙期を避ける
2. **スタッフへの周知**: 変更内容を事前共有
3. **QRコードの貼り替え**: 古いコードは必ず除去

---

### 12.10 よくある質問

**Q1: 階層設定を後から変更できますか？**
A: 技術的には可能ですが、既存の位置データに影響します。変更が必要な場合は、新規位置を作成して道具を移動し、古い位置を削除する方法を推奨します。

**Q2: 位置コードの形式を変更できますか？**
A: 位置コードは階層値をハイフン（-）で結合する形式に自動生成されます。カスタマイズはできませんが、表示名は自由に設定できます。

**Q3: QRコードなしで運用できますか？**
A: はい、可能です。QRコードは補助的な機能です。道具検索やドロップダウン選択でも位置を指定できます。

**Q4: 一時的な保管場所を作りたいのですが**
A: 「入荷待ち」「検品中」などの位置を作成することをお勧めします。説明欄に「一時保管用」と記載しておくと分かりやすいです。

**Q5: 複数の倉庫を管理できますか？**
A: 階層の最上位レベルに「倉庫名」を設定することで対応できます。
例: 倉庫（本社/第2倉庫） → エリア → 棚

**Q6: 位置情報なしで倉庫に返却できますか？**
A: はい、可能です。位置を選択せずに返却すると、位置は「未指定」となります。後から位置を割り当てることもできます。

---

## 12A. 消耗品管理：在庫調整 vs 発注管理の使い分け

消耗品管理には **「在庫調整」** と **「消耗品発注管理」** の2つの機能があります。それぞれ異なる目的で使用するため、正しい使い分けが重要です。

### 12A.1 2つの機能の概要

#### 在庫調整機能
**目的**: 例外的な在庫変動を記録するための機能
**アクセス**: 消耗品一覧 → 消耗品詳細 → 「在庫調整」ボタン

#### 消耗品発注管理
**目的**: 正式な発注プロセスを管理し、コスト追跡を行う機能
**アクセス**: サイドメニュー → 「消耗品発注管理」

---

### 12A.2 使い分けの基本ルール

| 状況 | 使用機能 | 理由 |
|------|---------|------|
| **正式な発注による入庫** | 消耗品発注管理 | 発注番号、金額、業者情報を記録 |
| **棚卸による実在庫との差異修正** | 在庫調整 | 例外的な調整として記録 |
| **紛失・破損による減少** | 在庫調整 | 例外的な在庫変動 |
| **他社からの無償提供** | 在庫調整 | 発注プロセスを経由しない入庫 |
| **返品・不良品の減少** | 在庫調整 | 例外的な在庫変動 |
| **試用品・サンプル品の入庫** | 在庫調整 | 発注プロセスを経由しない入庫 |

---

### 12A.3 具体的な使用シナリオ

#### シナリオ1: 正式な発注による入庫（消耗品発注管理を使用）

**状況**: ボルトセットを業者から100個購入する

**手順**:
1. サイドメニューから「消耗品発注管理」を開く
2. 「+ 新規発注」をクリック
3. 発注情報を入力：
   ```
   消耗品: ボルトセット
   数量: 100個
   発注日: 2024/12/04
   納品予定日: 2024/12/10
   業者名: 〇〇商事
   発注番号: PO-2024-001
   単価: 500円
   合計金額: 50,000円
   ```
4. 「発注登録」をクリック → ステータス「発注中」
5. 納品されたら、発注詳細画面から「納品処理」をクリック
6. 納品情報を入力：
   ```
   実納品日: 2024/12/10
   実納品数: 100個
   ```
7. 「納品完了」をクリック
8. **自動的に倉庫在庫が100個増加します**

**メリット**:
- 発注履歴が残る
- コストが正確に記録される
- 納品予定日と実納品日が管理できる
- 業者情報が一元管理される

---

#### シナリオ2: 棚卸による差異修正（在庫調整を使用）

**状況**: システム上は50個のはずだが、実際に数えたら48個しかない

**手順**:
1. 消耗品一覧から「ボルトセット」を開く
2. 「在庫調整」ボタンをクリック
3. 調整内容を入力：
   ```
   調整種別: 在庫を減らす
   数量: 2個
   理由: 棚卸による修正（実在庫との差異）
   メモ: 2024年12月度棚卸にて-2個確認
   ```
4. 「調整実行」をクリック
5. 倉庫在庫が48個に修正される

**注意点**:
- 棚卸は定期的（月次など）に実施することを推奨
- 差異が大きい場合は、原因調査を行うこと

---

#### シナリオ3: 紛失による減少（在庫調整を使用）

**状況**: 現場でドリルビット（消耗品）を紛失した

**手順**:
1. 消耗品一覧から「ドリルビット」を開く
2. 「在庫調整」ボタンをクリック
3. 調整内容を入力：
   ```
   調整種別: 在庫を減らす
   数量: 1個
   理由: 紛失
   メモ: A現場にて紛失、担当者：田中
   ```
4. 「調整実行」をクリック

**注意点**:
- 紛失が頻発する場合は、管理体制の見直しを検討
- 高額な消耗品の紛失は、事故報告書の作成も推奨

---

#### シナリオ4: 他社からの無償提供（在庫調整を使用）

**状況**: 協力会社から試供品としてネジセット30個をもらった

**手順**:
1. 消耗品一覧から「ネジセット」を開く
2. 「在庫調整」ボタンをクリック
3. 調整内容を入力：
   ```
   調整種別: 在庫を追加
   数量: 30個
   理由: 無償提供・試供品
   メモ: 〇〇工業より試供品として受領
   ```
4. 「調整実行」をクリック

**注意点**:
- 無償提供でも記録を残すことで、在庫の正確性を保つ
- 試供品の品質を評価し、今後の発注候補とするか判断

---

#### シナリオ5: 破損による減少（在庫調整を使用）

**状況**: 倉庫で保管中のペイント缶が破損し、使用不可になった

**手順**:
1. 消耗品一覧から「ペイント缶」を開く
2. 「在庫調整」ボタンをクリック
3. 調整内容を入力：
   ```
   調整種別: 在庫を減らす
   数量: 2缶
   理由: 破損・不良品
   メモ: 倉庫保管中に転倒し破損、廃棄処分
   ```
4. 「調整実行」をクリック

---

### 12A.4 よくある間違い

#### ❌ 間違った使い方1: 正式発注なのに在庫調整を使用
```
業者から50個購入したのに、在庫調整で「+50個」と登録
→ 発注履歴が残らず、コスト管理ができない
→ 消耗品発注管理を使用すべき
```

#### ❌ 間違った使い方2: 棚卸差異を発注管理で処理しようとする
```
実在庫が2個少なかったので、架空の発注を作成
→ 虚偽の発注データが残り、監査時に問題になる
→ 在庫調整を使用すべき
```

#### ✅ 正しい使い方: 発注と調整を使い分ける
```
- 業者からの購入 → 消耗品発注管理
- 棚卸差異、紛失、破損、無償提供 → 在庫調整
```

---

### 12A.5 実務運用のベストプラクティス

#### 日常業務
1. **入庫時の基本ルール**:
   - 業者から購入 → 必ず消耗品発注管理を使用
   - 例外的な入庫 → 在庫調整を使用（必ず理由を記載）

2. **減少時の基本ルール**:
   - 通常使用による減少 → 現場移動で自動減少（通常の消耗品移動機能）
   - 紛失・破損 → 在庫調整を使用

#### 定期業務
1. **月次棚卸**:
   - 月末に実地棚卸を実施
   - 差異がある場合は在庫調整で修正
   - 差異の原因を分析し、記録を残す

2. **月次レポート確認**:
   - 発注管理レポートでコスト推移を確認
   - 在庫調整履歴で例外的な変動を確認
   - 異常値（紛失多発など）があれば対策を検討

#### 権限管理
- **在庫調整**: リーダー・管理者のみ実行可能
- **消耗品発注管理**: 管理者のみ実行可能
- 不正な在庫操作を防ぐため、権限は厳格に管理

---

### 12A.6 発注管理の詳細操作

#### 発注の新規登録
1. サイドメニュー「消耗品発注管理」をクリック
2. 右上の「+ 新規発注」ボタンをクリック
3. 発注情報を入力：
   - **消耗品**: ドロップダウンから選択
   - **数量**: 発注数量を入力
   - **発注日**: カレンダーから選択（デフォルトは今日）
   - **納品予定日**: カレンダーから選択
   - **業者名**: 発注先業者名を入力
   - **発注番号**: 社内管理用の発注番号（任意）
   - **単価**: 1個あたりの価格
   - **合計金額**: 自動計算（単価 × 数量）
   - **備考**: 特記事項があれば入力
4. 「発注登録」ボタンをクリック

#### 発注ステータスの遷移
```
発注中（初期状態）
  ↓ 業者へ発注を送信
発注済み（発注確定）
  ↓ 商品が納品される
納品済み（完了）
  ↓ 倉庫在庫に自動反映
```

キャンセルする場合:
```
発注中 または 発注済み
  ↓ キャンセル処理
キャンセル（在庫反映なし）
```

#### 発注を確定する（発注中 → 発注済み）
1. 発注一覧から対象発注をクリック
2. 発注詳細画面で「発注確定」ボタンをクリック
3. 確認画面で「確定」をクリック
4. ステータスが「発注済み」に変更

#### 納品処理をする（発注済み → 納品済み）
1. 発注一覧から納品された発注をクリック
2. 発注詳細画面で「納品処理」ボタンをクリック
3. 納品情報を入力：
   - **実納品日**: 実際に納品された日
   - **実納品数**: 実際に納品された数量（発注数量と異なる場合もあり）
   - **納品メモ**: 納品時の特記事項（任意）
4. 「納品完了」ボタンをクリック
5. **倉庫在庫が自動的に増加します**
6. ステータスが「納品済み」に変更

#### 発注をキャンセルする
1. 発注一覧から対象発注をクリック
2. 発注詳細画面で「キャンセル」ボタンをクリック
3. キャンセル理由を入力（必須）
4. 「キャンセル確定」をクリック
5. ステータスが「キャンセル」に変更（在庫反映なし）

---

### 12A.7 在庫調整の詳細操作

#### 在庫調整画面へのアクセス
1. 消耗品一覧から対象消耗品をクリック
2. 消耗品詳細画面で「在庫調整」ボタンをクリック

#### 在庫調整の入力項目

**調整種別**:
- **在庫を追加**: 棚卸による修正、無償提供など
- **在庫を減らす**: 棚卸による修正、紛失、破損など

**数量**:
- 調整する数量を入力（必須）

**理由**（ドロップダウン）:
- **棚卸による修正**: 実在庫とシステム在庫の差異
- **紛失**: 道具を紛失した
- **破損・不良品**: 使用不可になった
- **無償提供・試供品**: 他社から無償で受け取った
- **その他**: 上記以外の理由（メモに詳細を記載）

**メモ**:
- 調整の詳細な理由や状況を記載（任意だが推奨）
- 例: 「A現場にて紛失、担当者：田中」

#### 調整実行後の確認
- 倉庫在庫が即座に反映される
- 移動履歴に「在庫調整」として記録される
- 誰がいつ調整したかが記録され、監査可能

---

### 12A.8 よくある質問（FAQ）

**Q1: 発注管理と在庫調整、どちらを使えばいいか分からない**
A: 基本ルール：業者から購入する場合は発注管理、それ以外の例外的な変動は在庫調整を使用してください。

**Q2: 発注を間違えて登録してしまった**
A: 発注詳細画面から「キャンセル」ボタンでキャンセルできます。理由を入力して確定してください。

**Q3: 納品数が発注数と異なる場合はどうすればいい？**
A: 納品処理画面で「実納品数」に実際の数量を入力してください。差異があっても問題ありません。

**Q4: 在庫調整を間違えて実行してしまった**
A: 管理者に連絡し、逆方向の調整を実行してください（例：誤って+10した場合は-10で修正）。

**Q5: 棚卸で大量の差異が発見された**
A: 在庫調整で修正し、メモに「2024年12月度棚卸」などと記載してください。原因分析も行い、再発防止策を検討してください。

**Q6: 無償提供品も発注管理で記録すべき？**
A: いいえ、無償提供品は在庫調整で記録してください。発注管理は金額が発生する正式な発注用です。

**Q7: 在庫調整の履歴は確認できる？**
A: はい、消耗品詳細画面の「移動履歴」タブで確認できます。調整種別「在庫調整」として記録されています。

**Q8: 発注管理の権限がないユーザーはどうすればいい？**
A: 発注が必要な場合は、管理者に依頼してください。発注管理は管理者のみが実行できます。

---

### 12A.9 チェックリスト

#### 発注管理を使用する場合
- [ ] 業者から正式に購入する
- [ ] 発注番号が発行される
- [ ] 金額が発生する
- [ ] 納品予定日がある
- [ ] コスト管理が必要

→ **消耗品発注管理を使用**

#### 在庫調整を使用する場合
- [ ] 棚卸で差異が見つかった
- [ ] 道具を紛失・破損した
- [ ] 無償で受け取った
- [ ] 発注プロセスを経由しない
- [ ] 例外的な在庫変動である

→ **在庫調整を使用**

---

## 13. ユーザー管理

### 13.1 ユーザーの追加

#### 個別追加
1. 「ユーザー管理」→「新規ユーザー」をクリック
2. ユーザー情報を入力：
   ```
   メールアドレス*: tanaka@example.com
   氏名*: 田中太郎
   役割*: [▼スタッフ]
   部署: 工事部
   ```
3. 「招待メールを送信」をクリック
4. ユーザーにメールが届く

#### 一括追加
1. 「ユーザー管理」→「一括招待」
2. CSVテンプレートをダウンロード
3. ユーザー情報を入力
4. CSVをアップロード
5. 「一括招待実行」をクリック

### 13.2 権限の管理

#### 役割の種類
| 役割 | 道具登録 | ユーザー管理 | レポート | 持ち出し/返却 |
|------|---------|-------------|---------|--------------|
| 管理者 | ✓ | ✓ | ✓ | ✓ |
| リーダー | ✓ | - | ✓ | ✓ |
| スタッフ | - | - | △ | ✓ |

#### 権限変更
1. ユーザー一覧から対象を選択
2. 「編集」をクリック
3. 役割を変更
4. 「保存」をクリック

### 13.3 ユーザーの無効化

1. ユーザー一覧から対象を選択
2. 「無効化」をクリック
3. 無効化理由を入力
4. 「確認」をクリック

※無効化されたユーザーはログインできなくなりますが、履歴は保持されます。

---

## 14. レポート機能

### 14.1 レポートの種類

#### 在庫レポート
現在の在庫状況を確認：
- 道具別在庫数
- 場所別在庫分布
- 低在庫アラート
- 在庫推移グラフ

#### 利用状況レポート
道具の利用状況を分析：
- 道具別利用頻度
- ユーザー別利用統計
- 場所別アクティビティ
- 稼働率分析

#### 月次レポート
月間の総括：
- 移動件数統計
- トラブル件数
- コスト分析
- 改善提案

### 14.2 レポート生成

1. 「レポート」メニューを開く
2. レポートタイプを選択
3. 条件を設定：
   ```
   期間: 2024年1月1日 ～ 2024年1月31日
   対象: すべての道具
   場所: すべて
   ```
4. 出力形式を選択：
   - 画面表示
   - PDF
   - Excel
   - メール送信
5. 「レポート生成」をクリック

### 14.3 定期レポート設定

自動的にレポートを生成・送信：

1. 「レポート」→「定期レポート設定」
2. 「新規スケジュール」をクリック
3. 設定内容：
   ```
   レポート種類: 月次レポート
   頻度: 毎月1日
   送信先: manager@example.com
   形式: PDF
   ```
4. 「スケジュール作成」をクリック

---

## 15. システム設定

### 15.1 組織設定

#### 基本情報
1. 「設定」→「組織設定」
2. 以下を設定可能：
   - 組織名
   - 住所
   - 連絡先
   - ロゴ画像

#### 営業時間設定
```
営業開始時間: 08:00
営業終了時間: 18:00
休業日: 土曜日、日曜日、祝日
```

### 15.2 カテゴリ管理

道具のカテゴリをカスタマイズ：

1. 「設定」→「カテゴリ管理」
2. 「新規カテゴリ」をクリック
3. カテゴリ名を入力
4. 親カテゴリを選択（階層化可能）
5. 「保存」をクリック

### 15.3 場所管理

作業場所を管理：

1. 「設定」→「場所管理」
2. 「新規場所」をクリック
3. 場所情報を入力：
   ```
   場所名: A現場
   種類: 現場
   住所: 東京都〇〇区...
   責任者: 山田太郎
   ```
4. 「保存」をクリック

### 15.4 通知設定

#### メール通知
```
☑ 低在庫アラート（在庫が最小値を下回った時）
☑ 長期未返却アラート（3日以上未返却）
☑ メンテナンス期限通知
☐ 日次サマリー
```

#### アラート閾値
```
低在庫アラート: [5] 個以下
未返却アラート: [3] 日以上
メンテナンス通知: [7] 日前
```

---

## 第4部: システム管理者向けマニュアル

## 16. 組織の初期設定

### 16.1 新規組織のセットアップ

#### Step 1: 組織情報登録
```
組織名: A建設株式会社
業界: 建設業
従業員数: 50名
契約プラン: スタンダード
```

#### Step 2: 管理者アカウント作成
```
メールアドレス: admin@a-kensetsu.com
氏名: 管理者
役割: システム管理者
```

#### Step 3: 初期データ設定
1. カテゴリマスタ登録
2. 場所マスタ登録
3. 初期ユーザー登録

### 16.2 データ移行

#### Excelからのインポート
1. 移行用テンプレートをダウンロード
2. 既存データをテンプレートに転記
3. データ検証ツールで確認
4. インポート実行

#### 移行後の確認
- 道具マスタの件数確認
- QRコード生成状態
- ユーザーアクセス確認

### 16.3 業界別テンプレート適用

#### 建設業テンプレート
```
カテゴリ：
├─ 工具
│  ├─ 手工具
│  └─ 電動工具
├─ 建設機械
├─ 安全用品
└─ 測定器具
```

#### 電気工事業テンプレート
```
カテゴリ：
├─ 測定器
├─ 工具
├─ 安全器具
└─ ケーブル類
```

---

## 17. 機能フラグの管理

### 17.1 機能フラグとは

組織ごとに利用可能な機能を制御する仕組み：
- 契約プランに応じた機能制限
- 段階的な機能開放
- カスタマイズされた機能提供

### 17.2 機能フラグ設定画面

```
システム管理 > 機能フラグ管理
```

#### 利用可能な機能一覧
```
■ データ管理機能
☑ bulk_import - 一括データ取込
☑ data_export - データエクスポート
☐ custom_fields - カスタムフィールド

■ レポート機能
☑ advanced_analytics - 高度な分析
☐ scheduled_reports - 定期レポート

■ 通知機能
☑ email_notifications - メール通知
☐ slack_integration - Slack連携
☐ push_notifications - プッシュ通知

■ メンテナンス管理
☐ maintenance_schedule - メンテナンススケジュール
☐ repair_tracking - 修理履歴追跡

■ 拡張機能
☐ api_access - API アクセス
☐ barcode_support - バーコード対応
☐ multi_language - 多言語対応
```

### 17.3 機能の有効化/無効化

1. 対象機能のチェックボックスを操作
2. 必要に応じて詳細設定：
   ```
   例: bulk_import の詳細設定
   - 最大行数: 10000
   - 許可形式: xlsx, csv
   ```
3. 「変更を保存」をクリック
4. 即座に反映される

### 17.4 プラン別推奨設定

#### スタータープラン
- 基本機能のみ
- bulk_import（制限付き）
- email_notifications

#### スタンダードプラン
- データ管理機能全般
- 基本的なレポート機能
- メール通知

#### プレミアムプラン
- 全機能利用可能
- API アクセス
- カスタマイズ可能

---

## 18. データの移行と保守

### 18.1 バックアップ

#### 自動バックアップ
- 毎日深夜2時に自動実行
- 過去30日分を保持
- 別リージョンに複製

#### 手動バックアップ
1. 「システム管理」→「バックアップ」
2. 「今すぐバックアップ」をクリック
3. バックアップ完了を確認

### 18.2 データ復旧

#### ポイントインタイムリカバリ
1. 「システム管理」→「データ復旧」
2. 復旧ポイントを選択
3. 対象データを確認
4. 「復旧実行」をクリック

### 18.3 データメンテナンス

#### 不要データのクリーンアップ
```
対象データ：
☑ 1年以上前の移動履歴
☑ 削除済み道具（2年経過）
☐ 無効化ユーザーの履歴

実行タイミング：
毎月1日 深夜3時
```

#### パフォーマンス最適化
1. インデックスの再構築
2. 統計情報の更新
3. キャッシュクリア

### 18.4 監査とコンプライアンス

#### 監査ログ
すべての操作が記録される：
- ユーザー操作
- システム変更
- データアクセス

#### レポート出力
1. 「監査ログ」メニュー
2. 期間を指定
3. 「監査レポート生成」
4. コンプライアンス確認用に保管

---

## 付録

### A. キーボードショートカット

| ショートカット | 機能 |
|---------------|------|
| Ctrl + K | 検索 |
| Ctrl + N | 新規作成 |
| Ctrl + S | 保存 |
| Alt + Q | QRスキャン起動 |
| Esc | キャンセル/閉じる |

### B. エラーコード一覧

| コード | 意味 | 対処法 |
|--------|------|--------|
| E001 | 認証エラー | 再ログイン |
| E002 | 権限不足 | 管理者に連絡 |
| E003 | データ不整合 | サポートに連絡 |
| E101 | ネットワークエラー | 接続確認 |
| E201 | 在庫不足 | 在庫確認 |
| E301 | QRコード無効 | QRコード再発行 |

### C. お問い合わせ

#### サポート窓口
- メール: support@tool-manager.com
- 電話: 03-XXXX-XXXX
- 営業時間: 平日 9:00-18:00

#### よくある質問（FAQ）
オンラインヘルプ: https://help.tool-manager.com

#### システム状態確認
https://status.tool-manager.com

---

## 更新履歴

- 2024-11-30: 初版作成
- バージョン: 1.0.0