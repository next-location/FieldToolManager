# 道具カテゴリ管理 Q&A

## 基本

### Q1: 道具カテゴリ管理とは何ですか？

**A**: 道具や消耗品を分類するためのカテゴリを作成・編集・削除する機能です。カテゴリを設定することで、道具や消耗品を整理しやすくなり、検索やフィルタリングが効率的になります。例：「電動工具」「測定器」「養生材」など。

### Q2: 誰がカテゴリ管理にアクセスできますか？

**A**: マネージャーと管理者のみがアクセスできます。

| 権限 | カテゴリ閲覧 | 作成・編集 | 削除 |
|------|------------|-----------|------|
| **リーダー** | ❌ | ❌ | ❌ |
| **マネージャー** | ✅ | ✅ | ❌ |
| **管理者** | ✅ | ✅ | ✅ |

リーダーと一般スタッフはカテゴリ管理機能にアクセスできません。

### Q3: カテゴリ管理画面にどうやってアクセスしますか？

**A**: 以下の手順でアクセスします：
1. ダッシュボードまたはサイドメニューから「道具マスタ」をクリック
2. 「カテゴリ管理」タブをクリック

### Q4: カテゴリとは何ですか？道具マスタとの違いは？

**A**:
- **カテゴリ**: 道具や消耗品を分類するためのグループ（例：「電動工具」「測定器」）
- **道具マスタ**: 道具の種類（テンプレート）そのもの（例：「インパクトドライバー」「レーザー距離計」）

カテゴリは道具マスタをさらにグループ化するための上位概念です。1つのカテゴリに複数の道具マスタが含まれます。

### Q5: カテゴリは必ず設定する必要がありますか？

**A**: いいえ、カテゴリの設定は任意です。道具マスタや道具を登録する際にカテゴリを設定しなくても問題ありません。ただし、カテゴリを設定すると検索やフィルタリングが効率的になるため、推奨されます。

---

## カテゴリの作成

### Q6: カテゴリの新規作成方法は？

**A**: 以下の手順で作成します：
1. 「カテゴリ管理」タブを開く
2. 右上の「新規作成」ボタンをクリック
3. カテゴリ名（必須、最大50文字）を入力
4. 説明（任意、最大500文字）を入力
5. 「登録」ボタンをクリック

### Q7: カテゴリ名にはどんな名前をつければよいですか？

**A**: 具体的で明確な名称を推奨します。

**良い例**：
- 電動工具
- 測定器
- 養生材
- 保護具
- 接着・固定材

**悪い例**：
- カテゴリA（具体的でない）
- その他（分類として不明確）
- 雑貨（範囲が広すぎる）

### Q8: カテゴリの説明欄には何を書けばよいですか？

**A**: カテゴリに含まれる道具の種類や用途を具体的に記載します。

**例**：
```
カテゴリ名: 電動工具
説明: ドリル、インパクトドライバー、グラインダー、丸ノコなど、電動で動作する工具類

カテゴリ名: 測定器
説明: レーザー距離計、水平器、メジャー、ノギスなど、計測・測定を行う道具
```

説明を設定すると、カテゴリ一覧で表示され、他のユーザーが理解しやすくなります。

### Q9: カテゴリはいくつまで作成できますか？

**A**: 技術的には制限はありませんが、実用上は10〜30カテゴリ程度を推奨します。

**理由**：
- カテゴリが多すぎると選択が煩雑になる
- カテゴリが少なすぎると分類の意味がない
- 現場の作業内容に応じて適切な粒度で設定してください

### Q10: 同じ名前のカテゴリを複数作成できますか？

**A**: 技術的には可能ですが、推奨されません。同じ名前のカテゴリが複数あると、選択時に混乱します。カテゴリ名は明確で重複しないようにしてください。

---

## カテゴリの編集

### Q11: カテゴリを編集する方法は？

**A**: 以下の手順で編集します：
1. カテゴリ一覧から編集したいカテゴリを探す
2. カテゴリの右側にある「編集」ボタンをクリック
3. カテゴリ名または説明を修正
4. 「更新」ボタンをクリック

### Q12: カテゴリ名を変更すると、既存の道具に影響はありますか？

**A**: カテゴリ名を変更しても、既存の道具・消耗品との紐付けは維持されます。カテゴリIDで管理されているため、道具詳細ページやフィルター欄で新しいカテゴリ名が自動的に表示されます。

### Q13: システムカテゴリとは何ですか？

**A**: システムによって自動作成される特別なカテゴリです。カテゴリ一覧に「システム」バッジが表示されます。

**代表例**：
- 「消耗品」カテゴリ：消耗品管理機能で使用

**特徴**：
- 編集・削除ができません
- 「編集」「削除」ボタンが表示されません

### Q14: システムカテゴリを編集したい場合はどうすればよいですか？

**A**: システムカテゴリは編集できません。システムの動作に必要なカテゴリのため、名前や説明を変更できない仕様です。別のカテゴリを新規作成してご利用ください。

### Q15: カテゴリの並び順を変更できますか？

**A**: 現在のバージョンでは、カテゴリの並び順は名前順（あいうえお順/アルファベット順）に自動ソートされます。手動での並び替えはできません。

---

## カテゴリの削除

### Q16: カテゴリを削除する方法は？

**A**: 以下の手順で削除します（管理者のみ）：
1. カテゴリ一覧から削除したいカテゴリを探す
2. カテゴリの右側にある「削除」ボタンをクリック
3. 確認ダイアログで「OK」をクリック

**注意**：マネージャーはカテゴリを削除できません。削除が必要な場合は管理者に依頼してください。

### Q17: カテゴリを削除すると、そのカテゴリを使用している道具も削除されますか？

**A**: いいえ、削除されません。カテゴリのみが削除されます。

**削除後の影響**：
- 道具・消耗品は削除されずに残ります
- 削除されたカテゴリに紐付いていた道具・消耗品は「カテゴリ未設定」になります
- 必要に応じて、別のカテゴリを再設定してください

### Q18: マネージャーがカテゴリを削除できないのはなぜですか？

**A**: カテゴリの削除は管理者（Admin）のみに制限されています。これは、誤って重要なカテゴリを削除してしまうことを防ぐためです。削除が必要な場合は、管理者に依頼してください。

### Q19: 誤ってカテゴリを削除してしまいました。復元できますか？

**A**: 削除されたカテゴリは論理削除（deleted_at）されており、完全には消えていません。システム管理者がデータベースから復元することが可能です。誤って削除した場合は、管理者またはシステム管理者に連絡してください。

### Q20: 削除ボタンが表示されないのはなぜですか？

**A**: 以下のいずれかの理由が考えられます：

1. **マネージャーでログインしている**: 削除は管理者のみ可能です
2. **システムカテゴリを選択している**: システムカテゴリは削除できません

権限を確認してください。

---

## カテゴリの活用

### Q21: カテゴリを設定すると、どのような場面で活用できますか？

**A**: 以下の画面でカテゴリによる検索・フィルタリングが可能です：

1. **道具マスタ画面**: カテゴリでフィルタリングして道具マスタを表示
2. **道具一覧画面**: カテゴリでフィルタリングして道具を表示
3. **消耗品一覧画面**: カテゴリでフィルタリングして消耗品を表示
4. **道具・消耗品の新規登録画面**: カテゴリをドロップダウンから選択

### Q22: 推奨されるカテゴリ例はありますか？

**A**: 建設・工事現場で一般的に使用されるカテゴリの例：

| カテゴリ名 | 含まれる道具の例 |
|-----------|----------------|
| **養生材** | 養生テープ、ブルーシート、マスキングテープ |
| **電動工具** | ドリル、インパクトドライバー、グラインダー |
| **手工具** | ハンマー、スパナ、ドライバー |
| **測定器** | レーザー距離計、水平器、メジャー |
| **保護具** | ヘルメット、安全帯、保護メガネ |
| **接着・固定材** | 接着剤、ビス、釘、アンカー |
| **塗装用品** | ハケ、ローラー、塗料、シンナー |
| **配線・電気** | ケーブル、コンセント、スイッチ、端子 |
| **配管・水道** | パイプ、継手、バルブ、シール材 |

現場のニーズに合わせてカスタマイズしてください。

### Q23: カテゴリ設計のポイントは何ですか？

**A**: 以下のポイントに注意してください：

1. **具体的で明確な名称**: 「電動工具」「測定器」など
2. **適切な粒度**: 10〜30カテゴリ程度が理想
3. **現場のニーズに合わせる**: 使用頻度の高い道具種別を優先してカテゴリ化
4. **統一性のある命名**: 名詞で統一（「電動工具」「測定器」）または用途で統一（「塗装用品」「配管用品」）

### Q24: カテゴリが多すぎて管理が大変です。どうすればよいですか？

**A**: 以下の対処法を試してください：

1. **統合**: 似たカテゴリをまとめる（例：「ドリル」「インパクトドライバー」→「電動工具」）
2. **削除**: 使用頻度の低いカテゴリを削除
3. **見直し**: カテゴリの粒度を見直し、適切な数（10〜30）に調整

### Q25: カテゴリによるフィルタリング方法は？

**A**: 以下の手順でフィルタリングします：

**PC版（道具マスタ画面）**：
1. 検索・フィルター欄の「カテゴリー」ドロップダウンを開く
2. 絞り込みたいカテゴリを選択
3. カテゴリに紐付く道具マスタが表示されます

**モバイル版（道具マスタ画面）**：
1. 検索ボックスの右にあるフィルターアイコン（スライダーマーク）をタップ
2. カテゴリを選択
3. 「適用」ボタンをタップ

---

## カテゴリと道具マスタの関係

### Q26: 道具マスタを登録する際、カテゴリは必須ですか？

**A**: いいえ、カテゴリは任意です。道具マスタ登録時にカテゴリを選択しなくても登録できます。ただし、カテゴリを設定すると後でフィルタリングしやすくなるため、推奨されます。

### Q27: 1つの道具マスタに複数のカテゴリを設定できますか？

**A**: いいえ、できません。1つの道具マスタには1つのカテゴリのみ設定できます。複数のカテゴリに該当する場合は、最も適切なカテゴリを1つ選択してください。

### Q28: 道具マスタのカテゴリを後から変更できますか？

**A**: はい、可能です。道具マスタの編集画面でカテゴリを変更できます。

**手順**：
1. 道具マスタ一覧から該当の道具マスタを選択
2. 「編集」ボタンをクリック
3. カテゴリドロップダウンから別のカテゴリを選択
4. 「更新」ボタンをクリック

### Q29: カテゴリが削除された場合、道具マスタのカテゴリはどうなりますか？

**A**: カテゴリが削除されると、そのカテゴリに紐付いていた道具マスタは「カテゴリ未設定」になります。必要に応じて、道具マスタを編集して別のカテゴリを設定してください。

### Q30: 「カテゴリ未設定」の道具マスタを一括で別のカテゴリに変更できますか？

**A**: 現在のバージョンでは、カテゴリの一括変更機能はありません。道具マスタを1つずつ編集してカテゴリを設定してください。

---

## トラブルシューティング

### Q31: カテゴリ管理タブが表示されません。

**A**: リーダーまたは一般スタッフでログインしている可能性があります。カテゴリ管理タブはマネージャーと管理者のみが閲覧できます。権限が必要な場合は、管理者に権限変更を依頼してください。

### Q32: カテゴリ登録時にエラーが表示されます。

**A**: 以下を確認してください：

1. **カテゴリ名が入力されているか**: カテゴリ名は必須です
2. **カテゴリ名が50文字以内か**: 超過している場合は短くしてください
3. **説明が500文字以内か**: 超過している場合は短くしてください
4. **ネットワーク接続**: インターネット接続を確認してください

問題が解決しない場合は、ブラウザをリフレッシュして再度試してください。

### Q33: カテゴリを編集しても変更が反映されません。

**A**: 以下を試してください：

1. **ブラウザをリフレッシュ**: F5キーまたはCmd+Rでリフレッシュ
2. **キャッシュクリア**: ブラウザのキャッシュをクリア
3. **再ログイン**: 一度ログアウトして再ログイン

それでも反映されない場合は、管理者に連絡してください。

### Q34: 削除ボタンをクリックしても何も起こりません。

**A**: 以下を確認してください：

1. **JavaScriptが有効か**: ブラウザのJavaScriptが有効になっているか確認
2. **ネットワーク接続**: インターネット接続を確認
3. **ブラウザの互換性**: 最新版のChrome、Firefox、Safari、Edgeを使用してください

問題が解決しない場合は、管理者に連絡してください。

### Q35: カテゴリが勝手に削除されました。

**A**: 誤操作または管理者による削除の可能性があります。削除されたカテゴリは論理削除されており、システム管理者が復元できます。管理者に連絡して復元を依頼してください。

---

## カテゴリとフィルタリング

### Q36: カテゴリでフィルタリングしても道具が表示されません。

**A**: 以下の原因が考えられます：

1. **道具マスタにカテゴリが設定されていない**: 道具マスタの編集画面でカテゴリを設定してください
2. **カテゴリ名が間違っている**: カテゴリ名を確認してください
3. **該当する道具がない**: そのカテゴリに属する道具が存在しない可能性があります

### Q37: カテゴリフィルターをクリアする方法は？

**A**:

**PC版**：
- 検索・フィルター欄の右上にある「クリア」ボタンをクリック
- または、カテゴリドロップダウンで「すべて」を選択

**モバイル版**：
- フィルターモーダル内の「リセット」ボタンをタップ

### Q38: 複数のカテゴリで同時にフィルタリングできますか？

**A**: いいえ、現在のバージョンでは1つのカテゴリのみでフィルタリングできます。複数のカテゴリで絞り込みたい場合は、カテゴリを統合するか、検索機能と併用してください。

### Q39: カテゴリフィルターと検索を同時に使用できますか？

**A**: はい、可能です。カテゴリフィルターと検索ボックスを同時に使用すると、指定したカテゴリ内で検索ワードに一致する道具が表示されます。

**例**：
- カテゴリ: 「電動工具」
- 検索: 「ドリル」
- 結果: 電動工具カテゴリの中で「ドリル」を含む道具のみが表示

### Q40: カテゴリの作成順や使用頻度で並び替えできますか？

**A**: いいえ、現在のバージョンでは、カテゴリは名前順（あいうえお順/アルファベット順）に自動ソートされます。作成順や使用頻度での並び替えはできません。
