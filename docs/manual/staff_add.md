# スタッフ追加（権限の違い）マニュアル

## 📋 概要

スタッフ追加機能では、組織内のスタッフを登録し、適切な権限（ロール）を設定できます。権限により、使用できる機能が大きく異なるため、慎重に設定する必要があります。

## 👥 対象者

- **管理者（Admin）**: すべての権限のスタッフを追加可能
- **マネージャー（Manager）**: スタッフ・リーダーのみ追加可能（管理者・マネージャーは追加不可）
- **リーダー**: スタッフの追加不可（閲覧のみ）
- **スタッフ**: スタッフの追加不可（閲覧のみ）

## 📍 アクセス方法

1. 左メニューから「スタッフ管理」をクリック
2. 画面右上の「+ スタッフを追加」ボタンをクリック

## 🔐 権限（ロール）の種類と違い

ザイロクでは、4つの権限レベルがあります：

### 1️⃣ スタッフ（Staff）

**基本操作のみ可能な一般ユーザー**

#### できること
- ✅ 自分の出退勤打刻
- ✅ 自分の勤怠履歴閲覧
- ✅ 道具・消耗品・重機の一覧閲覧
- ✅ 道具の出入庫（QRスキャン）
- ✅ 消耗品の在庫調整（±100個まで）
- ✅ 現場一覧閲覧
- ✅ ダッシュボード閲覧

#### できないこと
- ❌ 道具・消耗品・重機の登録・編集・削除
- ❌ 現場の登録・編集・削除
- ❌ スタッフ管理
- ❌ 勤怠管理（他人の勤怠閲覧・修正）
- ❌ 設定変更
- ❌ 帳票の作成・承認

**用途**: 現場作業員、アルバイト、パートタイム従業員

### 2️⃣ リーダー（Leader）

**チーム管理権限を持つユーザー**

#### できること（スタッフに加えて）
- ✅ 自分のチームの勤怠閲覧
- ✅ 自分のチームの勤怠修正
- ✅ リーダー用QR発行（現場QR）
- ✅ 勤怠アラート通知閲覧（自チームのみ）
- ✅ 作業報告書の作成・提出
- ✅ 見積書の作成・提出
- ✅ 請求書の作成・提出
- ✅ 発注書の作成・提出

#### できないこと
- ❌ 道具・消耗品・重機の登録・編集・削除
- ❌ スタッフ管理
- ❌ 帳票の承認
- ❌ 設定変更

**用途**: 現場監督、チームリーダー、班長

### 3️⃣ マネージャー（Manager）

**スタッフ管理権限を持つユーザー**

#### できること（リーダーに加えて）
- ✅ スタッフ・リーダーの追加・編集・削除
- ✅ 道具・消耗品・重機の登録・編集
- ✅ 現場の登録・編集
- ✅ 全員の勤怠閲覧・修正
- ✅ 月次勤怠レポート
- ✅ 帳票の承認（作業報告書、見積書、請求書、発注書）
- ✅ 在庫調整（制限なし）
- ✅ CSVエクスポート

#### できないこと
- ❌ 管理者・マネージャーの追加・編集・削除
- ❌ 権限変更
- ❌ パスワードリセット
- ❌ 組織設定変更
- ❌ プラン変更
- ❌ CSV一括登録
- ❌ 監査ログ閲覧

**用途**: 工事部長、営業部長、店舗マネージャー

### 4️⃣ 管理者（Admin）

**全権限を持つユーザー**

#### できること（マネージャーに加えて）
- ✅ すべてのスタッフの追加・編集・削除
- ✅ 権限変更
- ✅ パスワードリセット
- ✅ 変更履歴閲覧
- ✅ CSV一括登録（スタッフ、道具、重機、消耗品）
- ✅ 道具・消耗品・重機の削除
- ✅ 現場の削除
- ✅ 組織設定変更
- ✅ カテゴリ管理
- ✅ 保管場所管理
- ✅ 勤怠設定
- ✅ 現場QR管理
- ✅ タブレット端末管理
- ✅ プラン変更
- ✅ 監査ログ閲覧
- ✅ 詳細分析

**用途**: 経営者、システム管理者、本部責任者

## 📝 スタッフ追加の手順

### 1️⃣ 追加画面を開く

1. 「スタッフ管理」画面で「+ スタッフを追加」ボタンをクリック
2. 「新規スタッフを追加」モーダルが表示される

### 2️⃣ 基本情報の入力

#### 名前（必須）
- スタッフの氏名を入力
- 最大50文字
- 例: 山田 太郎、田中 花子

#### メールアドレス（必須）
- ログイン時に使用するメールアドレス
- 最大100文字
- 重複不可（組織内で一意）
- 例: yamada@example.com

#### 初期パスワード（必須）
- スタッフの初回ログイン時に使用するパスワード
- **要件**: 8文字以上、大文字・小文字・数字必須
- 最大100文字

**パスワード生成機能**:
- 「🔄 ランダム生成」ボタンをクリック
- 12文字の安全なパスワードが自動生成される
- 大文字・小文字・数字・記号を含む

**パスワードの扱い**:
- 生成されたパスワードをメモまたはコピー
- スタッフに安全な方法で伝達（メール、直接手渡しなど）
- 初回ログイン後、スタッフ本人に変更を促す

### 3️⃣ 任意情報の入力

#### 部署（任意）
- スタッフが所属する部署名
- 最大50文字
- 既存の部署名が候補として表示される
- 例: 工事部、営業部、総務部

#### 社員番号（任意）
- 組織内の社員番号
- 最大20文字
- 例: EMP-001、2024-0123

#### 電話番号（任意）
- スタッフの電話番号
- 最大20文字
- 例: 090-1234-5678、03-1234-5678

### 4️⃣ 権限の設定（必須）

権限を選択します：

| 権限 | 表示名 | 用途 |
|------|--------|------|
| staff | 一般スタッフ | 基本操作のみ |
| leader | リーダー | チーム管理権限 |
| manager | マネージャー | スタッフ管理権限 |
| admin | 管理者 | 全権限 |

**権限選択のガイド**:
- ℹ️ staff: 一般スタッフ（基本操作のみ）
- ℹ️ leader: リーダー（チーム管理権限）
- ℹ️ manager: マネージャー（スタッフ管理権限）
- ℹ️ admin: 管理者（全権限）

**マネージャーの制限**:
- マネージャーは「一般スタッフ」または「リーダー」のみ追加可能
- 「マネージャー」または「管理者」は追加できません

### 5️⃣ 追加の実行

1. すべての必須項目を入力
2. 「追加する」ボタンをクリック
3. 「スタッフを追加しました」メッセージが表示される
4. スタッフ一覧に新しいスタッフが表示される

## ⚠️ 注意事項

### プラン上限について

各プランには、登録可能なスタッフ数の上限があります：

| プラン | 上限人数 |
|--------|---------|
| スタート | 5名 |
| スタンダード | 20名 |
| ビジネス | 50名 |
| プロ | 100名 |
| エンタープライズ | 無制限 |

**上限に達した場合**:
- 「+ スタッフを追加」ボタンが無効になります
- 「プラン変更」から上位プランへのアップグレードが必要です

### メールアドレスの重複

- 組織内で同じメールアドレスは登録できません
- 既に登録済みのメールアドレスを入力すると、エラーが表示されます

### パスワードポリシー

パスワードは以下の要件を満たす必要があります：
- **8文字以上**
- **大文字を含む**（A-Z）
- **小文字を含む**（a-z）
- **数字を含む**（0-9）

要件を満たさない場合、エラーが表示されます。

### 初期パスワードの管理

- 初期パスワードは管理者が設定します
- スタッフに安全な方法で伝達してください
- 初回ログイン後、スタッフ本人にパスワード変更を促してください
- セキュリティ上、メールやチャットでの送信は避けることを推奨

### 権限の選択

- **最小権限の原則**: 必要最小限の権限を付与
- **過剰な権限を避ける**: 全員を管理者にしない
- **業務内容に応じて選択**: 現場作業員→staff、現場監督→leader、部長→manager、経営者→admin

### マネージャーの制限

- マネージャーは自分より上位の権限（manager、admin）を持つスタッフを追加できません
- 管理者のみが、すべての権限のスタッフを追加できます

## 🔄 追加後の操作

### 初回ログインの案内

スタッフを追加したら、以下の情報を伝えてください：

1. **ログインURL**: https://zairoku.com/login
2. **メールアドレス**: 登録したメールアドレス
3. **初期パスワード**: 設定したパスワード
4. **初回ログイン後**: パスワードを変更するよう促す

### パスワードリセット

スタッフがパスワードを忘れた場合：
1. スタッフ一覧から対象のスタッフを選択
2. 「パスワードリセット」ボタンをクリック
3. リセットトークンが発行される
4. 24時間以内に新しいパスワードを設定可能

### 権限の変更

権限を変更したい場合：
1. スタッフ一覧から対象のスタッフを選択
2. 「編集」ボタンをクリック
3. 権限を変更
4. 「保存」ボタンをクリック

**注意**: 管理者のみが権限変更できます。

## 📊 権限マトリックスの確認

### 権限マトリックスを開く

1. 「スタッフ管理」画面で「権限一覧」ボタンをクリック
2. 権限マトリックスモーダルが表示される

### 権限マトリックスの見方

権限マトリックスでは、各権限（admin、manager、leader、staff）が、どの機能にアクセスできるかを一覧で確認できます。

**凡例**:
- 🟢 緑色: 可能
- 🟡 黄色: 条件付き（例: 「自チームのみ」「leader・staffのみ」）
- 🔴 赤色: 不可

**カテゴリ**:
- スタッフ管理
- 道具管理
- 在庫管理
- 出入庫管理
- 現場管理
- 重機管理
- 消耗品管理
- 道具セット管理
- 勤怠管理
- レポート・分析
- 設定

## 🔗 関連機能

- [スタッフ管理マニュアル](staff_management.md)
- [組織設定マニュアル](settings_organization.md)
- [勤怠管理マニュアル](attendance.md)

---

**最終更新**: 2026-01-21
