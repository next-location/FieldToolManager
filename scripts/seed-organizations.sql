-- 組織管理用のテストデータを挿入

-- 既存のテスト組織を削除（ネクスト建設以外）
DELETE FROM organizations WHERE subdomain != 'next-kensetsu';

-- テスト組織を挿入
INSERT INTO organizations (
  id,
  name,
  subdomain,
  phone,
  fax,
  postal_code,
  address,
  billing_contact_name,
  billing_contact_email,
  billing_contact_phone,
  billing_address,
  is_active,
  sales_status,
  priority,
  expected_contract_amount,
  lead_source,
  sales_notes,
  last_contact_date,
  next_appointment_date
) VALUES
-- 1. 株式会社サンライズ工業（未接触）
(
  '10000000-0000-0000-0000-000000000002',
  '株式会社サンライズ工業',
  'sunrise-kogyo',
  '03-1234-5678',
  '03-1234-5679',
  '150-0001',
  '東京都渋谷区神宮前1-1-1',
  '山田太郎',
  'yamada@sunrise-kogyo.co.jp',
  '090-1234-5678',
  '東京都渋谷区神宮前1-1-1',
  true,
  'not_contacted',
  'medium',
  50000,
  'ホームページ',
  '大手建設会社。問い合わせフォームから連絡あり。',
  NULL,
  NULL
),

-- 2. 株式会社ブルースカイ建築（アポ取得）
(
  '10000000-0000-0000-0000-000000000003',
  '株式会社ブルースカイ建築',
  'bluesky-kenchiku',
  '06-2345-6789',
  '06-2345-6790',
  '530-0001',
  '大阪府大阪市北区梅田2-2-2',
  '佐藤花子',
  'sato@bluesky-kenchiku.co.jp',
  '080-2345-6789',
  '大阪府大阪市北区梅田2-2-2',
  true,
  'appointment',
  'high',
  80000,
  '紹介',
  '中堅建設会社。来週水曜日にオンライン面談予定。',
  '2025-12-10',
  '2025-12-18 14:00:00'
),

-- 3. 有限会社グリーンハウス（見込み客）
(
  '10000000-0000-0000-0000-000000000004',
  '有限会社グリーンハウス',
  'greenhouse-ltd',
  '052-3456-7890',
  NULL,
  '460-0008',
  '愛知県名古屋市中区栄3-3-3',
  '鈴木一郎',
  'suzuki@greenhouse-ltd.co.jp',
  '090-3456-7890',
  '愛知県名古屋市中区栄3-3-3',
  true,
  'prospect',
  'high',
  120000,
  '展示会',
  'リフォーム専門。スタンダードプランに関心あり。',
  '2025-12-09',
  '2025-12-20 10:00:00'
),

-- 4. 株式会社オーシャンビルド（提案中）
(
  '10000000-0000-0000-0000-000000000005',
  '株式会社オーシャンビルド',
  'ocean-build',
  '092-4567-8901',
  '092-4567-8902',
  '810-0001',
  '福岡県福岡市中央区天神4-4-4',
  '田中次郎',
  'tanaka@ocean-build.co.jp',
  '080-4567-8901',
  '福岡県福岡市中央区天神4-4-4',
  true,
  'proposal',
  'high',
  150000,
  '既存顧客紹介',
  '見積書提出済み。プレミアムプラン＋重機管理を提案中。',
  '2025-12-11',
  '2025-12-16 15:00:00'
),

-- 5. 株式会社マウンテン土木（商談中）
(
  '10000000-0000-0000-0000-000000000006',
  '株式会社マウンテン土木',
  'mountain-doboku',
  '011-5678-9012',
  '011-5678-9013',
  '060-0001',
  '北海道札幌市中央区北一条5-5-5',
  '高橋三郎',
  'takahashi@mountain-doboku.co.jp',
  '090-5678-9012',
  '北海道札幌市中央区北一条5-5-5',
  true,
  'negotiation',
  'high',
  200000,
  'テレアポ',
  '大型土木工事を請け負う。価格交渉中。スタッフ数50名想定。',
  '2025-12-12',
  '2025-12-19 13:00:00'
),

-- 6. 株式会社レイクサイド塗装（契約手続き中）
(
  '10000000-0000-0000-0000-000000000007',
  '株式会社レイクサイド塗装',
  'lakeside-tosou',
  '077-6789-0123',
  NULL,
  '520-0801',
  '滋賀県大津市におの浜6-6-6',
  '伊藤美咲',
  'ito@lakeside-tosou.co.jp',
  '080-6789-0123',
  '滋賀県大津市におの浜6-6-6',
  true,
  'contracting',
  'medium',
  60000,
  'ホームページ',
  '契約書作成中。来週契約予定。スタートプラン。',
  '2025-12-13',
  '2025-12-17 11:00:00'
),

-- 7. 有限会社リバーサイド設備（失注）
(
  '10000000-0000-0000-0000-000000000008',
  '有限会社リバーサイド設備',
  'riverside-setsubi',
  '075-7890-1234',
  '075-7890-1235',
  '600-8216',
  '京都府京都市下京区烏丸通7-7-7',
  '渡辺健太',
  'watanabe@riverside-setsubi.co.jp',
  '090-7890-1234',
  '京都府京都市下京区烏丸通7-7-7',
  true,
  'lost',
  'low',
  40000,
  '紹介',
  '価格面で折り合わず。競合他社のサービスを選択。',
  '2025-12-05',
  NULL
),

-- 8. 株式会社フォレストホーム（連絡不要）
(
  '10000000-0000-0000-0000-000000000009',
  '株式会社フォレストホーム',
  'forest-home',
  '028-8901-2345',
  NULL,
  '320-0811',
  '栃木県宇都宮市大通り8-8-8',
  '中村香織',
  'nakamura@forest-home.co.jp',
  NULL,
  '栃木県宇都宮市大通り8-8-8',
  true,
  'do_not_contact',
  'low',
  NULL,
  'テレアポ',
  '担当者不在が続く。連絡希望なしと言われた。',
  '2025-11-28',
  NULL
);

-- 営業活動履歴の挿入
INSERT INTO sales_activities (
  organization_id,
  activity_type,
  title,
  description,
  created_by,
  created_by_name,
  created_at
) VALUES
-- ブルースカイ建築の活動履歴
(
  '10000000-0000-0000-0000-000000000003',
  'phone_call',
  '初回電話',
  '担当者の佐藤様と電話。システム導入に前向き。',
  '80dc4fb1-8926-4610-8034-e6c9b081595c',
  'スーパー管理者',
  '2025-12-10 10:00:00'
),
(
  '10000000-0000-0000-0000-000000000003',
  'email',
  '資料送付',
  'スタンダードプランの資料をメールで送付。',
  '80dc4fb1-8926-4610-8034-e6c9b081595c',
  'スーパー管理者',
  '2025-12-10 14:30:00'
),

-- グリーンハウスの活動履歴
(
  '10000000-0000-0000-0000-000000000004',
  'meeting',
  '展示会で面談',
  '建設業界展示会でブース訪問。名刺交換。',
  '80dc4fb1-8926-4610-8034-e6c9b081595c',
  'スーパー管理者',
  '2025-12-01 15:00:00'
),
(
  '10000000-0000-0000-0000-000000000004',
  'follow_up',
  'フォローアップ電話',
  '展示会後のフォローアップ。デモ希望あり。',
  '80dc4fb1-8926-4610-8034-e6c9b081595c',
  'スーパー管理者',
  '2025-12-09 11:00:00'
),

-- オーシャンビルドの活動履歴
(
  '10000000-0000-0000-0000-000000000005',
  'online_meeting',
  'オンラインデモ',
  'Zoomでシステムデモを実施。好評。',
  '80dc4fb1-8926-4610-8034-e6c9b081595c',
  'スーパー管理者',
  '2025-12-08 14:00:00'
),
(
  '10000000-0000-0000-0000-000000000005',
  'proposal_sent',
  '見積書送付',
  'プレミアムプラン＋重機管理の見積書を送付。',
  '80dc4fb1-8926-4610-8034-e6c9b081595c',
  'スーパー管理者',
  '2025-12-11 10:00:00'
);

COMMENT ON TABLE organizations IS '組織マスタテーブル - テストデータ含む';
