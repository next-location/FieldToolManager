-- テストデータ挿入スクリプト（実際のテーブル構造に合わせて修正版）
-- 組織ID: 00000000-0000-0000-0000-000000000001

-- 1. 現場データの挿入（5件）
INSERT INTO sites (id, organization_id, name, address, is_active, created_at, updated_at)
VALUES
  ('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '新宿ビル建設現場', '東京都新宿区西新宿1-1-1', true, NOW(), NOW()),
  ('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '渋谷駅前再開発現場', '東京都渋谷区道玄坂1-2-3', true, NOW(), NOW()),
  ('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '港区マンション建設現場', '東京都港区六本木3-4-5', true, NOW(), NOW()),
  ('10000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '品川オフィスビル現場', '東京都品川区大崎1-2-3', true, NOW(), NOW()),
  ('10000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', '神奈川橋梁工事現場', '神奈川県横浜市西区みなとみらい1-1-1', false, NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- 2. 倉庫ロケーションの挿入（6件）
INSERT INTO warehouse_locations (id, organization_id, code, display_name, description, level, sort_order, is_active, created_at, updated_at)
VALUES
  ('30000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'A1', 'A棟-1階', '電動工具保管エリア', 0, 1, true, NOW(), NOW()),
  ('30000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'A2', 'A棟-2階', '手工具保管エリア', 0, 2, true, NOW(), NOW()),
  ('30000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'B1', 'B棟-1階', '消耗品保管エリア', 0, 3, true, NOW(), NOW()),
  ('30000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'B2', 'B棟-2階', '安全用品保管エリア', 0, 4, true, NOW(), NOW()),
  ('30000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', 'C-OUT', 'C棟-屋外', '重機・足場資材保管エリア', 0, 5, true, NOW(), NOW()),
  ('30000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', 'OFFICE', '事務所', '貸出カウンター', 0, 6, true, NOW(), NOW())
ON CONFLICT (organization_id, code) DO NOTHING;

-- 3. 道具カテゴリの確認と挿入（既存のtool_categoriesテーブルを使用）
INSERT INTO tool_categories (id, organization_id, name, description, created_at, updated_at)
VALUES
  ('20000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '電動工具', '電動ドリル、インパクトドライバーなど', NOW(), NOW()),
  ('20000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '手工具', 'ハンマー、スパナ、レンチなど', NOW(), NOW()),
  ('20000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '測定機器', '水準器、メジャー、レーザー距離計など', NOW(), NOW()),
  ('20000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '安全用品', 'ヘルメット、安全帯、保護メガネなど', NOW(), NOW()),
  ('20000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', '塗装用具', 'スプレーガン、ローラー、刷毛など', NOW(), NOW()),
  ('20000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', '切断工具', 'のこぎり、カッター、グラインダーなど', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- 4. 道具（tools）の挿入（15件 - 個別管理の道具）
INSERT INTO tools (id, organization_id, name, category_id, status, current_location, current_site_id, management_type, created_at, updated_at)
VALUES
  -- 電動工具（5件）
  ('40000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'マキタ 充電式インパクトドライバー TD171D', '20000000-0000-0000-0000-000000000001', 'available', 'warehouse', NULL, 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'マキタ 充電式ドリルドライバー DF481D', '20000000-0000-0000-0000-000000000001', 'in_use', 'site', '10000000-0000-0000-0000-000000000001', 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'ハイコーキ 電子ディスクグラインダー G13SP', '20000000-0000-0000-0000-000000000006', 'in_use', 'site', '10000000-0000-0000-0000-000000000001', 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'マキタ 電動ハンマー HM1203C', '20000000-0000-0000-0000-000000000001', 'available', 'warehouse', NULL, 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', 'ハイコーキ 充電式丸のこ C3606DA', '20000000-0000-0000-0000-000000000006', 'in_use', 'site', '10000000-0000-0000-0000-000000000002', 'individual', NOW(), NOW()),

  -- 測定機器（5件）
  ('40000000-0000-0000-0000-000000000011', '00000000-0000-0000-0000-000000000001', 'タジマ レーザー距離計 LKT-P15', '20000000-0000-0000-0000-000000000003', 'in_use', 'site', '10000000-0000-0000-0000-000000000001', 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000012', '00000000-0000-0000-0000-000000000001', 'シンワ デジタル水準器 76349', '20000000-0000-0000-0000-000000000003', 'available', 'warehouse', NULL, 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000013', '00000000-0000-0000-0000-000000000001', 'タジマ コンベックス 5.5m', '20000000-0000-0000-0000-000000000003', 'in_use', 'site', '10000000-0000-0000-0000-000000000002', 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000014', '00000000-0000-0000-0000-000000000001', 'ムラテックKDS レーザー墨出し器 ATL-23', '20000000-0000-0000-0000-000000000003', 'available', 'warehouse', NULL, 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000015', '00000000-0000-0000-0000-000000000001', 'ニコン 電子セオドライト NE-100', '20000000-0000-0000-0000-000000000003', 'in_use', 'site', '10000000-0000-0000-0000-000000000003', 'individual', NOW(), NOW()),

  -- 塗装用具（5件）
  ('40000000-0000-0000-0000-000000000016', '00000000-0000-0000-0000-000000000001', 'アネスト岩田 スプレーガンW-101', '20000000-0000-0000-0000-000000000005', 'available', 'warehouse', NULL, 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000017', '00000000-0000-0000-0000-000000000001', 'ワグナー エアレススプレーガン ProjectPro117', '20000000-0000-0000-0000-000000000005', 'in_use', 'site', '10000000-0000-0000-0000-000000000004', 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000018', '00000000-0000-0000-0000-000000000001', 'マルテー ペイントローラー 9インチ', '20000000-0000-0000-0000-000000000005', 'available', 'warehouse', NULL, 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000019', '00000000-0000-0000-0000-000000000001', 'アサヒペン コンプレッサー付きスプレーガン', '20000000-0000-0000-0000-000000000005', 'available', 'warehouse', NULL, 'individual', NOW(), NOW()),
  ('40000000-0000-0000-0000-000000000020', '00000000-0000-0000-0000-000000000001', '好川産業 エアブラシセット', '20000000-0000-0000-0000-000000000005', 'maintenance', 'warehouse', NULL, 'individual', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- 5. 消耗品用の道具（tools - management_type='consumable'）の挿入（10件）
INSERT INTO tools (id, organization_id, name, category_id, unit, management_type, quantity, status, current_location, created_at, updated_at)
VALUES
  ('50000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'コーススレッド 3.8×41mm', '20000000-0000-0000-0000-000000000002', '箱', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'コーススレッド 3.8×51mm', '20000000-0000-0000-0000-000000000002', '箱', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'ディスクグラインダー砥石 100mm', '20000000-0000-0000-0000-000000000006', '枚', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'サンドペーパー #80', '20000000-0000-0000-0000-000000000006', '枚', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', '油性塗料 白 4L', '20000000-0000-0000-0000-000000000005', '缶', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', '水性塗料 ベージュ 4L', '20000000-0000-0000-0000-000000000005', '缶', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000007', '00000000-0000-0000-0000-000000000001', '作業用手袋 Lサイズ', '20000000-0000-0000-0000-000000000004', '双', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000008', '00000000-0000-0000-0000-000000000001', '防塵マスク', '20000000-0000-0000-0000-000000000004', '個', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000009', '00000000-0000-0000-0000-000000000001', '保護メガネ', '20000000-0000-0000-0000-000000000004', '個', 'consumable', 1, 'available', 'warehouse', NOW(), NOW()),
  ('50000000-0000-0000-0000-000000000010', '00000000-0000-0000-0000-000000000001', '耳栓', '20000000-0000-0000-0000-000000000004', '個', 'consumable', 1, 'available', 'warehouse', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- 6. 消耗品在庫（consumable_inventory）の挿入
INSERT INTO consumable_inventory (organization_id, tool_id, location_type, warehouse_location_id, quantity, created_at, updated_at)
VALUES
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000001', 'warehouse', '30000000-0000-0000-0000-000000000003', 25, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000002', 'warehouse', '30000000-0000-0000-0000-000000000003', 8, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000003', 'warehouse', '30000000-0000-0000-0000-000000000003', 45, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000004', 'warehouse', '30000000-0000-0000-0000-000000000003', 100, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000005', 'warehouse', '30000000-0000-0000-0000-000000000003', 6, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000006', 'warehouse', '30000000-0000-0000-0000-000000000003', 4, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000007', 'warehouse', '30000000-0000-0000-0000-000000000004', 50, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000008', 'warehouse', '30000000-0000-0000-0000-000000000004', 80, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000009', 'warehouse', '30000000-0000-0000-0000-000000000004', 40, NOW(), NOW()),
  ('00000000-0000-0000-0000-000000000001', '50000000-0000-0000-0000-000000000010', 'warehouse', '30000000-0000-0000-0000-000000000004', 100, NOW(), NOW())
ON CONFLICT DO NOTHING;

-- 7. 重機カテゴリの挿入
INSERT INTO heavy_equipment_categories (id, organization_id, name, description, created_at, updated_at)
VALUES
  ('70000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '油圧ショベル', 'バックホー、ミニショベルなど', NOW(), NOW()),
  ('70000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'ホイールローダー', '前輪式積込機', NOW(), NOW()),
  ('70000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'ダンプトラック', '土砂運搬車両', NOW(), NOW()),
  ('70000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'クレーン車', '移動式クレーン', NOW(), NOW()),
  ('70000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', '高所作業車', '高所作業用車両', NOW(), NOW())
ON CONFLICT (id) DO NOTHING;

-- 8. 重機（heavy_equipment）の挿入（6件）
INSERT INTO heavy_equipment (id, organization_id, equipment_code, name, category_id, manufacturer, model_number, serial_number, ownership_type, status, current_location_id, purchase_date, vehicle_inspection_date, created_at, updated_at)
VALUES
  ('60000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'EQ-001', 'バックホー 0.45m³', '70000000-0000-0000-0000-000000000001', 'コマツ', 'PC78US-11', 'PC78-12345', 'owned', 'in_use', '10000000-0000-0000-0000-000000000001', '2020-04-15', '2025-04-20', NOW(), NOW()),
  ('60000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', 'EQ-002', 'ミニショベル 0.25m³', '70000000-0000-0000-0000-000000000001', 'コマツ', 'PC30MR-5', 'PC30-67890', 'owned', 'available', NULL, '2021-06-10', '2025-05-15', NOW(), NOW()),
  ('60000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', 'EQ-003', 'ホイールローダー 1.5m³', '70000000-0000-0000-0000-000000000002', 'コマツ', 'WA100-8', 'WA100-11223', 'owned', 'in_use', '10000000-0000-0000-0000-000000000002', '2019-08-20', '2025-03-10', NOW(), NOW()),
  ('60000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', 'EQ-004', 'ダンプトラック 2t', '70000000-0000-0000-0000-000000000003', '日野', 'デュトロ', 'DT-44556', 'owned', 'in_use', '10000000-0000-0000-0000-000000000003', '2022-02-28', '2025-06-01', NOW(), NOW()),
  ('60000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', 'EQ-005', 'クレーン車 4.9t吊', '70000000-0000-0000-0000-000000000004', 'タダノ', 'ZR505', 'ZR-77889', 'leased', 'available', NULL, '2018-11-12', '2025-02-25', NOW(), NOW()),
  ('60000000-0000-0000-0000-000000000006', '00000000-0000-0000-0000-000000000001', 'EQ-006', '高所作業車 12m', '70000000-0000-0000-0000-000000000005', 'アイチ', 'AT-120TG', 'AT-99001', 'owned', 'maintenance', NULL, '2020-09-05', '2025-01-15', NOW(), NOW())
ON CONFLICT (organization_id, equipment_code) DO NOTHING;

-- 完了メッセージと結果確認
SELECT 'テストデータの挿入が完了しました' AS message;

SELECT
  'Sites: ' || (SELECT COUNT(*) FROM sites WHERE organization_id = '00000000-0000-0000-0000-000000000001') ||
  ', Warehouse Locations: ' || (SELECT COUNT(*) FROM warehouse_locations WHERE organization_id = '00000000-0000-0000-0000-000000000001') ||
  ', Tool Categories: ' || (SELECT COUNT(*) FROM tool_categories WHERE organization_id = '00000000-0000-0000-0000-000000000001') ||
  ', Tools: ' || (SELECT COUNT(*) FROM tools WHERE organization_id = '00000000-0000-0000-0000-000000000001') ||
  ', Consumable Inventory: ' || (SELECT COUNT(*) FROM consumable_inventory WHERE organization_id = '00000000-0000-0000-0000-000000000001') ||
  ', Heavy Equipment: ' || (SELECT COUNT(*) FROM heavy_equipment WHERE organization_id = '00000000-0000-0000-0000-000000000001')
  AS summary;
