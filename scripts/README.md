# テストデータとユーザーアカウント作成スクリプト

## 概要

データベースリセット後に自動的にテストデータとユーザーアカウントを作成するためのスクリプトです。

## 使い方

### 1. すべてのテストデータとユーザーを一括作成

```bash
npm run seed:all
```

このコマンドは以下を実行します：
1. テストデータ（組織、現場、道具、道具アイテム）の作成
2. テストユーザーアカウントの作成

### 2. テストデータのみ作成

```bash
npm run seed:dev
```

### 3. ユーザーアカウントのみ作成

```bash
npm run create:users
```

## 作成されるテストアカウント

### 管理者アカウント
- **メールアドレス**: admin@test.com
- **パスワード**: Test1234!
- **氏名**: 管理者 太郎
- **部署**: 管理部
- **権限**: admin

### スタッフアカウント
- **メールアドレス**: staff@test.com
- **パスワード**: Test1234!
- **氏名**: 現場 次郎
- **部署**: 作業部
- **権限**: staff

### リーダーアカウント
- **メールアドレス**: leader@test.com
- **パスワード**: Test1234!
- **氏名**: リーダー 三郎
- **部署**: 工事部
- **権限**: leader

## 作成されるテストデータ

### 組織
- **組織名**: テスト建設株式会社

### 現場（5件）
1. 新宿ビル改修工事 (東京都新宿区)
2. 渋谷マンション新築工事 (東京都渋谷区)
3. 横浜倉庫増設工事 (神奈川県横浜市)
4. 品川オフィス改装工事 (東京都品川区)
5. 川崎工場補修工事 (神奈川県川崎市)

### 道具（5種類、17個）
1. **電動ドライバー** (DD-2000) - 5個
2. **インパクトドライバー** (TD-171D) - 3個
3. **電動サンダー** (BO5041) - 4個
4. **レーザー距離計** (GLM50C) - 2個
5. **水平器** (LST-600) - 3個

## トラブルシューティング

### データベースリセット後にログインできない場合

1. テストデータとユーザーを再作成：
   ```bash
   npm run seed:all
   ```

2. ブラウザのキャッシュをクリア

3. それでもログインできない場合は、Supabaseのローカルインスタンスを再起動：
   ```bash
   npx supabase stop
   npx supabase start
   npm run seed:all
   ```

## スクリプトの詳細

### seed-simple.sql
組織、現場、道具、道具アイテムを作成するSQLスクリプト

### create-users.sql
Supabase Auth用のユーザーアカウントを作成するSQLスクリプト
- `auth.users` テーブルに認証情報を挿入
- `auth.identities` テーブルにアイデンティティ情報を挿入
- `users` テーブルにユーザープロフィールを挿入
